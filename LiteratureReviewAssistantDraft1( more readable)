# Workflow: Literature Assistant Agent Pipeline

# User query
#    |
#    v
# (Research intent agent) (LLM)
#    - parses the natural language query
#    - infers topic, population, outcomes, study types, etc.
#    - proposes a simple semantic scholar keyword query
#    |
#    ---> (approve()) human checkpoint
#    |      - shows the inferred intent as JSON
#    |      - can stop the run by typing 'n' or 'no'
#    |
#    v
# (Literature Supervisor S2]
#    - simplifies the LLM's query for semantic scholar
#    - calls SemanticScholarSearchAgent (with fallback to user query)
#    - applies optional year filter
#    - deduplicates results
#    - ranks papers by relevance / recency / citations / OA
#    - returns a markdown "mini literature packet" 
#    |
#    v
# Markdown report (top k papers + provenance + intent)


from langchain_openai import ChatOpenAI
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.output_parsers import PydanticOutputParser


# Passing API key(s)

import os
os.environ["SEMANTIC_SCHOLAR_API_KEY"] = os.getenv("SEMANTIC_SCHOLAR_API_KEY", "insert your Semantic Scholar API key here")  
os.environ["OPENAI_API_KEY"] = os.getenv("OPENAI_API_KEY", "insert yoy OpenAI API key here)


from typing import List, Optional, Dict
from pydantic import BaseModel, Field

# Canonical representation of a paper used throughout the notebook
class Paper(BaseModel):
    paperId: str
    title: str
    abstract: str
    year: int
    venue: str
    doi: Optional[str] = None
    url: Optional[str] = None
    citationCount: Optional[int] = 0
    isOpenAccess: Optional[bool] = None

# Wrapper for a search request to semantic scholar
class SearchRequest(BaseModel):
    query: str = Field(..., description="Semantic Scholar search query")
    # number of papers to return
    k: int = 12

# Wrapper for the search result (a list of Papers)
class SearchResult(BaseModel):
    papers: List[Paper]


# Semantic Scholar Search Agent

import os, time, requests, math

# Acts as a thin client for the Semantic Scholar /graph/v1 API
## Thin client definition: means a very small, simple wrapper around an external API that does only the minimum 
## necessary work, without adding extra logic, intelligence, or functionality on top.
# Responsibilities:
## Handle API key + headers
## Retry on transient errors (429/5xx)
## Page through results from /paper/search
## Map raw JSON into the Paper model

class SemanticScholarSearchAgent:
    BASE = "https://api.semanticscholar.org/graph/v1"
    FIELDS = ",".join([
        "title","abstract","year","venue","url",
        "externalIds","isOpenAccess","openAccessPdf","citationCount"
    ])
    # max page size per API call
    PAGE_LIMIT = 100

    def __init__(self, api_key: Optional[str] = None, sleep_sec: float = 0.6, max_retries: int = 3):
        # preference for explicit api_key argument, otherwise read from environment
        self.api_key = api_key or os.environ.get("SEMANTIC_SCHOLAR_API_KEY") or ""
        self.sleep_sec = sleep_sec
        self.max_retries = max_retries

    def _headers(self):
        # if there is a key, send it in the x-api-key header
        return {"x-api-key": self.api_key} if self.api_key else {}

    # low level get helper with simple retry logic
    # returns JSON on success
    # retries on 429/5xx up to max_retries
    # raises for other non 200s
    def _get(self, path: str, params: Dict):
        url = f"{self.BASE}{path}"
        for attempt in range(self.max_retries):
            r = requests.get(url, params=params, headers=self._headers(), timeout=30)

            if r.status_code == 200:
                return r.json()
            if r.status_code in (429, 500, 502, 503, 504):
                time.sleep(self.sleep_sec * (attempt + 1))
                continue
            r.raise_for_status()
        r = requests.get(url, params=params, headers=self._headers(), timeout=30)
        r.raise_for_status()
        return r.json()

    # high level search wrapper
    # uses /paper/search endpoint
    # paginates until k papers collected or run out
    # converts each raw record into a Paper model
    def search(self, query: str, k: int) -> List[Paper]:
        out: List[Paper] = []
        offset = 0
        limit = min(k, self.PAGE_LIMIT)
        while len(out) < k:
            data = self._get("/paper/search", {
                "query": query,
                "fields": self.FIELDS,
                "limit": limit,
                "offset": offset
            })
            papers = data.get("data", [])
            # no more results from API, stop paging
            if not papers:
                break
            
            for p in papers:
                ext = p.get("externalIds") or {}
                out.append(Paper(
                    paperId=p.get("paperId",""),
                    title=p.get("title","Untitled"),
                    abstract=(p.get("abstract") or "(No abstract provided.)").strip(),
                    year=int(p.get("year") or 0),
                    venue=(p.get("venue") or "N/A").strip(),
                    doi=ext.get("DOI"),
                    url=p.get("url"),
                    citationCount=int(p.get("citationCount") or 0),
                    isOpenAccess=bool(p.get("isOpenAccess")) if p.get("isOpenAccess") is not None else None
                ))
                if len(out) >= k:
                    break
            offset += limit
            # small sleep between pages to be polite to the API
            time.sleep(self.sleep_sec)
        return out

    # adapter to align with the rest of the notebook:takes a SearchRequest, returns a SearchResult
    def run(self, req: SearchRequest) -> SearchResult:
        return SearchResult(papers=self.search(req.query, req.k))


# Lightweight deduplication + heuristic ranking

import hashlib
from collections import OrderedDict
from typing import Tuple

# normalize the title and hash it, so it can treat near identical titles as the same paper
def _title_key(title: str) -> str:
    t = " ".join(title.lower().split())[:160]
    return hashlib.sha1(t.encode("utf-8")).hexdigest()

# remove obvious duplicates using:
# paperId (if present)
# DOI (if present)
# normalized + hashed title
# keeps the first occurrence of each unique paper
def deduplicate(papers: List[Paper]) -> List[Paper]:
    seen = set()
    keep: List[Paper] = []
    for p in papers:
        keys = [p.paperId or "", (p.doi or "").lower(), _title_key(p.title)]
        if any(k and k in seen for k in keys):
            continue
        for k in keys:
            if k:
                seen.add(k)
        keep.append(p)
    return keep

# compute a simple scalar score for a paper from:
# lexical relevance: overlap between query terms and (title + abstract)
# recency: newer years score higher
# citation impact: log transformed citationCount
# open access: small bonus if isOpenAccess
# this is not perfect, just a reasonable heuristic
## heuerstic definition: A simple, practical rule or calculation that gives a 
## good enough result, even if it’s not mathematically perfect or theoretically optimal.
### later, can swap heuristic out for:
### ML ranking
### LLM ranking
### citation graph ranking
### multi agent ranking
def score_paper(p: Paper, query_terms: List[str], max_year: int) -> float:

    # combine title + abstract into lowercase text for keyword matching
    text = f"{p.title} {p.abstract}".lower()
    
    # relevance: fraction of query terms that appear in the text
    if query_terms:
        matches = sum(1 for t in query_terms if t in text)
        relevance = matches / len(query_terms)
    else:
        relevance = 0.0

    # recency normalized to (0,1) relative to max_year
    if p.year and max_year > 0:
        recency = max((p.year - (max_year - 20)), 0) / 20.0  # cap at ~20-year window
        recency = min(max(recency, 0.0), 1.0)
    else:
        recency = 0.0

    # citation impact normalized with log scale
    cites = math.log10((p.citationCount or 0) + 1)
    cites = min(cites / 4.0, 1.0)  # assume 10^4 citations ~ max

    # open access bonus
    oa = 1.0 if p.isOpenAccess else 0.0

    # weighted sum of components 
    return 0.35*relevance + 0.25*recency + 0.25*cites + 0.15*oa

# score all papers, sort by score descending, and keep top k
def rank_and_trim(papers: List[Paper], query: str, k: int) -> List[Paper]:
    query_terms = [w for w in query.lower().replace('"','').split() if len(w) > 2]
    max_year = max([p.year for p in papers if p.year], default=0)
    scored = [(score_paper(p, query_terms, max_year), p) for p in papers]
    scored.sort(key=lambda x: x[0], reverse=True)
    return [p for _, p in scored[:k]]


# Human in the loop checkpoint

# simple manual checkpoint
# prints a title and a (possibly truncated) JSON/str representation of payload
# asks the user to approve
# if user types 'n' or 'no', raises SystemExit to stop the pipeline
# otherwise, returns the payload unchanged
# used by the supervisor to let inspect the ResearchIntent
import json

def approve(title: str, payload):
    print(f"\n=== {title} ===")
    if isinstance(payload, (dict, list)):
        print(json.dumps(payload, indent=2)[:3000])
    else:
        print(str(payload)[:3000])
    ans = input("Approve? [Enter]=yes, 'n'=no: ").strip().lower()
    if ans == "n":
        raise SystemExit(f"Stopped at {title}")
    return payload


# Research Intent Agent + Supervisor 

import re

# turn a potentially complex query (with AND/OR/etc) into a simple
# keyword string better suited for semantic scholar's search
# keep only alphanumeric tokens
# drop common stopwords
# truncate to at most `max_terms` tokens
def simplify_for_semantic_scholar(q: str, max_terms: int = 12) -> str:
    tokens = re.findall(r"[A-Za-z0-9\-]+", q)
    stop = {"and", "or", "not", "the", "of", "in", "for", "with", "to", "a", "an", "year"}
    filtered = [t for t in tokens if t.lower() not in stop]
    return " ".join(filtered[:max_terms])

# structured representation of the user's research goal, inferred from natural language
class ResearchIntent(BaseModel):
    high_level_question: str = Field(
        ...,
        description="Rephrased, clear research question in one sentence."
    )
    topic: str = Field(
        ...,
        description="Short topic label capturing the main subject."
    )
    population: Optional[str] = Field(
        None, description="Target population (e.g., adults with T2D, ICU patients, etc.)."
    )
    outcomes: Optional[List[str]] = Field(
        None, description="Primary outcomes of interest (e.g., mortality, readmission, A1c)."
    )
    study_types: Optional[List[str]] = Field(
        None,
        description="Desired study designs (e.g., RCT, cohort, meta-analysis, systematic review)."
    )
    date_range: Optional[str] = Field(
        None,
        description='Human-readable date range, e.g. "last 5 years", "2015-2024".'
    )
    must_include_terms: Optional[List[str]] = Field(
        None,
        description="Keywords that must be present in the query."
    )
    exclude_terms: Optional[List[str]] = Field(
        None,
        description="Keywords that should be excluded."
    )
    semantic_scholar_query: str = Field(
        ...,
        description="Optimized query string to send directly to Semantic Scholar."
    )
    notes_for_supervisor: Optional[str] = Field(
        None,
        description="Guidance for the supervisor on how to use these constraints."
    )

# LLM based agent that converts a free text user query into a ResearchIntent object
class ResearchIntentAgent:
    def __init__(self, model: str = "gpt-5-mini", temperature: float = 0.0):
        self.llm = ChatOpenAI(model=model, temperature=temperature)
        self.parser = PydanticOutputParser(pydantic_object=ResearchIntent)
        self.prompt = ChatPromptTemplate.from_messages(
            [
                (
                    "system",
                    """
You are a Research Intent & Constraints Agent for a research hospital literature assistant.

Your job:
1. Read the user's free-text question about medical or biomedical literature.
2. Infer and structure:
   - high_level_question
   - topic
   - population
   - outcomes
   - study_types
   - date_range
   - must_include_terms
   - exclude_terms
3. Construct an optimized semantic_scholar_query string that is suitable for the
   Semantic Scholar /graph/v1/paper/search endpoint:
   - DO NOT use AND, OR, NOT, parentheses, field tags, or year filters.
   - DO NOT include minus signs for exclusion (no "-animal", etc.).
   - Just a short bag-of-words style query with 5–12 important keywords/phrases,
     separated by spaces, e.g.:
     "sepsis ICU early detection machine learning"
4. Fill the notes_for_supervisor with advice on how to apply these constraints.

Return ONLY JSON that matches the provided schema.
                    """.strip()
                ),
                (
                    "human",
                    """
User question:
{user_query}

{format_instructions}
                    """.strip()
                ),
            ]
        )

    # run the LLM chain and parse the result into a ResearchIntent object
    def run(self, user_query: str) -> ResearchIntent:
        chain = (
            self.prompt.partial(
                format_instructions=self.parser.get_format_instructions()
            )
            | self.llm
            | self.parser
        )
        return chain.invoke({"user_query": user_query})

# LiteratureSupervisorS2 ties everything together:
## calls ResearchIntentAgent to structure the user query
## uses approve() as a human in the loop checkpoint
## builds a Semantic Scholar query (with simplification and fallback)
## calls SemanticScholarSearchAgent to retrieve papers
## applies optional year filter
## deduplicates + ranks papers
## returns a markdown "mini literature packet" 
class LiteratureSupervisorS2:
    def __init__(self, search_agent: SemanticScholarSearchAgent, intent_agent: ResearchIntentAgent):
        self.search = search_agent
        self.intent = intent_agent

    def run(
        self,
        query: str,
        k: int = 12,
        raw_fetch: int = 80,
        year_min: Optional[int] = None,
    ) -> str:
        # infer structured intent from the user's natural language query
        intent = self.intent.run(query)
        approve("Research intent", intent.model_dump())

        # build and simplify the query sent to Semantic Scholar
        raw_query = intent.semantic_scholar_query or query
        search_query = simplify_for_semantic_scholar(raw_query)

        raw = self.search.run(
             SearchRequest(query=search_query, k=raw_fetch)
        ).papers

        # fallback: if the intent generated query yields nothing,
        # retry with a simplified version of the original user query
        if not raw and raw_query != query:
            fallback_query = simplify_for_semantic_scholar(query)
            raw = self.search.run(
                SearchRequest(query=fallback_query, k=raw_fetch)
            ).papers
            # optionally update search_query so provenance reflects what we actually used
            search_query = fallback_query

        # optional post hoc filter by publication year
        if year_min:
            raw = [p for p in raw if (p.year or 0) >= year_min]

        # deduplicate across paperId / DOI / title
        uniq = deduplicate(raw)

        # rank and keep top k papers
        topk = rank_and_trim(uniq, search_query, k)

        # render a markdown "packet" instead of calling another LLM
        lines: List[str] = []
        lines.append("# Mini Literature Packet (Semantic Scholar + Intent Agent)")
        lines.append("")
        lines.append(f"**Original user query:** `{query}`")
        lines.append(f"**Optimized Semantic Scholar query:** `{search_query}`")
        lines.append("")
        lines.append("## Inferred research intent")
        lines.append(f"- High-level question: {intent.high_level_question}")
        lines.append(f"- Topic: {intent.topic}")
        if intent.population:
            lines.append(f"- Population: {intent.population}")
        if intent.outcomes:
            lines.append(f"- Outcomes: {', '.join(intent.outcomes)}")
        if intent.study_types:
            lines.append(f"- Study types: {', '.join(intent.study_types)}")
        if intent.date_range:
            lines.append(f"- Date range (intent): {intent.date_range}")
        if intent.must_include_terms:
            lines.append(f"- Must include terms: {', '.join(intent.must_include_terms)}")
        if intent.exclude_terms:
            lines.append(f"- Exclude terms: {', '.join(intent.exclude_terms)}")
        if intent.notes_for_supervisor:
            lines.append(f"- Notes: {intent.notes_for_supervisor}")
        lines.append("")
        lines.append("## Retrieval provenance")
        lines.append(f"- Fetched from API: {len(raw)}")
        lines.append(f"- After dedup: {len(uniq)}")
        lines.append(f"- Included (top k): {len(topk)}")
        if year_min:
            lines.append(f"- Year filter (arg): ≥ {year_min}")
        lines.append("")

        lines.append("## Top papers")
        for i, p in enumerate(topk, 1):
            citation_bits = []
            if p.venue:
                citation_bits.append(p.venue)
            if p.year:
                citation_bits.append(str(p.year))
            citation_str = "; ".join(citation_bits) if citation_bits else "N/A"

            lines.append(f"### [{i}] {p.title}")
            lines.append(f"- Citation: {citation_str}")
            if p.doi:
                lines.append(f"- DOI: {p.doi}")
            if p.url:
                lines.append(f"- URL: {p.url}")
            lines.append(f"- S2 paperId: {p.paperId}")
            lines.append("")
            if p.abstract:
                lines.append("**Abstract:**")
                lines.append(p.abstract.strip())
                lines.append("")

        return "\n".join(lines)


# Run it: run the full pipeline for a given query

agent = SemanticScholarSearchAgent()
intent_agent = ResearchIntentAgent(model="gpt-5-mini", temperature=0.0)
sup = LiteratureSupervisorS2(agent, intent_agent)

query = "breast cancer risk in young adults"
review_md = sup.run(query=query,
                    k=12, # number of papers to include in final packet
                    raw_fetch=120, # how many to fetch before dedup/ranking
                    year_min=2005) # optional lower bound on publication year

print(review_md)  # viewing entie review

#print(review_md[:3000])  # preview first ~3000 characters




OUTPUT:


=== Research intent ===
{
  "high_level_question": "What are the incidence and risk factors for breast cancer in young adults (early-onset breast cancer) 
   and which genetic, reproductive, and lifestyle factors influence risk?",
  "topic": "Breast cancer risk in young adults",
  "population": "Young adults (e.g., ages 18\u201339), including adolescent and young adult (AYA) populations",
  "outcomes": [
    "Incidence / age-specific incidence",
    "Risk factors (genetic, reproductive, lifestyle)",
    "Early-onset breast cancer prevalence",
    "Prognosis and age-related outcomes"
  ],
  "study_types": [
    "Cohort studies",
    "Case-control studies",
    "Systematic reviews",
    "Meta-analyses"
  ],
  "date_range": "Last 10 years (2015-2025)",
  "must_include_terms": [
    "breast cancer",
    "young adult",
    "risk"
  ],
  "exclude_terms": [
    "male breast cancer",
    "animal study"
  ],
  "semantic_scholar_query": "breast cancer young adult risk factors incidence early-onset AYA genetics",
  "notes_for_supervisor": "Use the semantic_scholar_query as a concise bag-of-words seed; apply UI/endpoint 
   filters for date range, human studies, language, and study design. Consider expanding search with synonyms 
   and specific terms if results are sparse: early-onset breast cancer adolescent young adult AYA BRCA1 BRCA2 
   familial hereditary reproductive factors oral contraceptives alcohol obesity. For screening for higher-level 
   evidence prioritize filter for systematic reviews and meta-analyses, then cohort/case-control studies. Exclude 
   male-only cohorts and animal studies via Semantic Scholar filters. Clarify age cutoffs in final selection 
   (some papers use <40, others <35); capture both definitions when screening results."
}
Approve? [Enter]=yes, 'n'=no:  yes
# Mini Literature Packet (Semantic Scholar + Intent Agent)

**Original user query:** `breast cancer risk in young adults`
**Optimized Semantic Scholar query:** `breast cancer young adult risk factors incidence early-onset AYA genetics`

## Inferred research intent
- High-level question: What are the incidence and risk factors for breast cancer in young adults (early-onset breast 
  cancer) and which genetic, reproductive, and lifestyle factors influence risk?
- Topic: Breast cancer risk in young adults
- Population: Young adults (e.g., ages 18–39), including adolescent and young adult (AYA) populations
- Outcomes: Incidence / age-specific incidence, Risk factors (genetic, reproductive, lifestyle), Early-onset breast
  cancer prevalence, Prognosis and age-related outcomes
- Study types: Cohort studies, Case-control studies, Systematic reviews, Meta-analyses
- Date range (intent): Last 10 years (2015-2025)
- Must include terms: breast cancer, young adult, risk
- Exclude terms: male breast cancer, animal study
- Notes: Use the semantic_scholar_query as a concise bag-of-words seed; apply UI/endpoint filters for date range, 
  human studies, language, and study design. Consider expanding search with synonyms and specific terms if results 
  are sparse: early-onset breast cancer adolescent young adult AYA BRCA1 BRCA2 familial hereditary reproductive 
  factors oral contraceptives alcohol obesity. For screening for higher-level evidence prioritize filter for systematic 
  reviews and meta-analyses, then cohort/case-control studies. Exclude male-only cohorts and animal studies via Semantic 
  Scholar filters. Clarify age cutoffs in final selection (some papers use <40, others <35); capture both definitions when screening results.

## Retrieval provenance
- Fetched from API: 119
- After dedup: 117
- Included (top k): 12
- Year filter (arg): ≥ 2005

## Top papers
### [1] What Is Known about Breast Cancer in Young Women?
- Citation: Cancers; 2023
- DOI: 10.3390/cancers15061917
- URL: https://www.semanticscholar.org/paper/88293abf1475a50c3e3d8e339f690b2e8a3e1b6a
- S2 paperId: 88293abf1475a50c3e3d8e339f690b2e8a3e1b6a

**Abstract:**
Simple Summary Breast cancer is the most common cancer affecting women under 40 years of age worldwide, with an 
increasing number of cases diagnosed each year. Despite this, breast cancer in young women is poorly understood as 
they are often underrepresented in clinical trials. Breast cancers in young women tend to be more aggressive and present 
at later stages as young women often do not meet screening age criteria. Recommended treatment may also be different due 
to unique fertility and psychosocial considerations. We herein summarize the unique challenges faced by young women, including 
risk factors, diagnosis, treatment, and survivorship issues, and draw attention to areas where further research is needed. 
Abstract Breast cancer (BC) is the second leading cause of cancer-related death in women under the age of 40 years worldwide. 
In addition, the incidence of breast cancer in young women (BCYW) has been rising. Young women are not the focus of screening 
programs and BC in younger women tends to be diagnosed in more advanced stages. Such patients have worse clinical outcomes and 
treatment complications compared to older patients. BCYW has been associated with distinct tumour biology that confers a worse prognosis, 
including poor tumour differentiation, increased Ki-67 expression, and more hormone-receptor negative tumours compared to women >50 years of age. 
Pathogenic variants in cancer predisposition genes such as BRCA1/2 are more common in early-onset BC compared to late-onset BC. Despite 
all these differences, BCYW remains poorly understood with a gap in research regarding the risk factors, diagnosis, prognosis, and 
treatment. Age-specific clinical characteristics or outcomes data for young women are lacking, and most of the standard treatments used 
in this subpopulation currently are derived from older patients. More age-specific clinical data and treatment options are required. 
In this review, we discuss the epidemiology, clinicopathologic characteristics, outcomes, treatments, and special considerations of 
breast cancer in young women. We also underline future directions and highlight areas that require more attention in future studies.

### [2] A Review of Breast Cancer Risk Factors in Adolescents and Young Adults
- Citation: Cancers; 2021
- DOI: 10.3390/cancers13215552
- URL: https://www.semanticscholar.org/paper/75547a550b200f5fdf8b909d41fca28acbecb3b6
- S2 paperId: 75547a550b200f5fdf8b909d41fca28acbecb3b6

**Abstract:**
Simple Summary Cancer diagnosed in patients between the ages of 15 and 39 deserves special consideration. Diagnoses within this 
cohort of adolescents and young adults include childhood cancers which present at an older age than expected, or an early presentation 
of cancers that are typically observed in older adults, such as breast cancer. Cancers within this age group are associated with worse 
disease-free and overall survival rates, and the incidence of these cases are rising. Knowing an individual’s susceptibility to disease 
can change their clinical management and allow for the risk-testing of relatives. This review discusses the risk factors that contribute 
to breast cancer in this unique cohort of patients, including inherited genetic risk factors, as well as environmental and lifestyle factors. 
We also describe risk models that allow clinicians to quantify a patient’s lifetime risk of developing disease. Abstract Cancer in adolescents 
and young adults (AYAs) deserves special consideration for several reasons. AYA cancers encompass paediatric malignancies that present at an 
older age than expected, or early-onset of cancers that are typically observed in adults. However, disease diagnosed in the AYA population is 
distinct to those same cancers which are diagnosed in a paediatric or older adult setting. Worse disease-free and overall survival outcomes 
are observed in the AYA setting, and the incidence of AYA cancers is increasing. Knowledge of an individual’s underlying cancer predisposition 
can influence their clinical care and may facilitate early tumour surveillance strategies and cascade testing of at-risk relatives. This information 
can further influence reproductive decision making. In this review we discuss the risk factors contributing to AYA breast cancer, such as heritable 
predisposition, environmental, and lifestyle factors. We also describe a number of risk models which incorporate genetic factors that aid clinicians 
in quantifying an individual’s lifetime risk of disease.

### [3] Risk Factors of Young-Onset Colorectal Cancer: Analysis of a Large Population-Based Registry
- Citation: Canadian Journal of Gastroenterology and Hepatology; 2022
- DOI: 10.1155/2022/3582443
- URL: https://www.semanticscholar.org/paper/a5c1cbe2c7b82dd6511d9464c7b2646a495ffdf9
- S2 paperId: a5c1cbe2c7b82dd6511d9464c7b2646a495ffdf9

**Abstract:**
Background As the third most common type of cancer in the United States, colorectal cancer (CRC) was previously thought to be rare in young populations.
Despite a decrease in the overall incidence of CRC, the rate of new cases under 50 years old has been continuously increasing. Aim The purpose of our study
was to analyze risk factors of young-onset CRC. Methods Commercially available software platform, Explorys, was used to extract data from a collective 
healthcare database electronically. Results In this database, 13,800 young adults (age 20–50) were diagnosed with primary colorectal malignancy. 
Compared to subjects with a previous family history of CRC who had an odds ratio of 17.78, those diagnosed with primary malignant neoplasm of 
breast and inflammatory bowel disease (ulcerative colitis and Crohn's) had odds ratios of 16.94, 4.4, and 3.7 for young-onset CRC, respectively. 
Patients with a history of alcohol abuse, smoking, obesity, diabetes mellitus, and hyperlipidemia had higher chances of developing young-onset CRC. 
In addition, the odds of CRC were lower in Hispanic ethnicity in comparison to Caucasians (OR: 0.54), with no statically significant differences between 
Caucasian, African American, and Asian populations. Conclusion Currently, this is an expansive study investigating the risk factors for early-onset CRC. 
The analysis showed factors such as family and individual history of IBD to have high association with early onset. Notably, an individual history of breast 
malignancy was strongly associated with early-onset CRC.

### [4] Incidence trends of early-onset breast cancer by lifestyle risk factors
- Citation: BMC Cancer; 2025
- DOI: 10.1186/s12885-025-13730-y
- URL: https://www.semanticscholar.org/paper/203af5bb2d8613370ba8edcad7cc83aa92257fdc
- S2 paperId: 203af5bb2d8613370ba8edcad7cc83aa92257fdc

**Abstract:**
The incidence of early-onset breast cancer (< 50 years) has been increasing over the past decades with the role of modifiable, lifestyle-related risk factors 
remaining mostly unidentified. To investigate the role of key lifestyle factors in the incidence trends of early-onset breast cancer (EOBC), we pooled data 
from six health studies in Finland in 1972–2015 and combined them with breast cancer data from the Finnish Cancer Registry. The cohort consisted of 56,253 
women with 397 EOBCs. The effects of risk factors (hazard ratios) on EOBC and average annual percent change (AAPC) of incidence were estimated using Poisson 
regression models. The highest annual increase in age-standardized incidence was observed among women aged 40–49 who were overweight (AAPC 4.0%, 95% CI 0.5–7.7%), 
currently smoking (AAPC 3.3%, 95% CI 0.1–6.6%) or moderately physically active (AAPC 2.9%, 95% CI 0.3–5.6%). The increase in early-onset breast cancer incidence was 
highest among women aged 40–49 who were overweight, currently smoking, or moderately physically active, while no change by risk factors was found in women under 
40 years of age. Our findings suggest a different type of cancer process in young adults and highlight the importance of lifestyle risk factors in the incidence of EOBC.

### [5] Diet as a Risk Factor for Early-Onset Colorectal Adenoma and Carcinoma: A Systematic Review
- Citation: Frontiers in Nutrition; 2022
- DOI: 10.3389/fnut.2022.896330
- URL: https://www.semanticscholar.org/paper/8ac72ff1781db5ca6e6db78d393b9f4c679d244b
- S2 paperId: 8ac72ff1781db5ca6e6db78d393b9f4c679d244b

**Abstract:**
Background Colorectal cancer in adults 50 years old and younger is increasing in incidence worldwide. Diet may be a modifiable risk factor. The objective of this
study was to examine evidence regarding the association between diet and the risk of developing early-onset colorectal cancer (EOCRC) and early-onset colorectal
adenomas in young adults. Methods PUBMED, Web of Science, and Embase were systematically searched for studies examining dietary intake as a risk factor for EOCRC
and early-onset colorectal adenomas. Results were synthesized narratively due to the heterogeneity of the studies. Results Of the 415 studies identified, ten met
the inclusion criteria. Of these ten studies, four provided data on dietary risk factors for early-onset colorectal adenomas and six provided data on dietary risk 
factors for EOCRC. The four studies that measured colorectal adenoma occurrence reported an increased incidence with high sugar sweetened beverage intake, a 
higher pro-inflammatory diet, a higher Western diet score and higher sulfur microbial diet score. A protective effect against early-onset colorectal adenomas 
was observed in those who had a higher Prudent diet score or higher adherence to other health dietary approaches (Dietary Approaches to Stop Hypertension, 
Alternative Healthy Eating Index-2010, or the alternative Mediterranean diet). Those who consumed large amounts of deep-fried foods, refined foods, followed a 
high fat diet, consumed large amounts of sugary drinks and desserts, and had low folate and fiber consumption had a significantly higher occurrence of EOCRC. A 
protective effect against EOCRC was observed for those who consumed more fruits and vegetables, high amounts of micronutrients and those who adhered to a vegetarian diet. 
Conclusions The results of this study reveal various dietary habits may be risk factors or protective against early-onset colorectal cancer and adenomas. Future research
should focus on large prospective cohort studies with long-term follow-up to confirm published results and further examine whether differences in diet quality are 
associated with EOCRC risk.

### [6] Risk factors for early-onset colorectal cancer: a population-based case–control study in Ontario, Canada
- Citation: Cancer Causes and Control; 2021
- DOI: 10.1007/s10552-021-01456-8
- URL: https://www.semanticscholar.org/paper/416211dc66d73a7cee01186e25b81023df9b83d4
- S2 paperId: 416211dc66d73a7cee01186e25b81023df9b83d4

**Abstract:**
There has been an alarming increase in colorectal cancer (CRC) incidence among young adults aged < 50 years, and factors driving this upward trend are unknown. 
This study investigated associations between various medical, lifestyle, and dietary factors and risk of early-onset CRC (EO-CRC). A population-based case–control 
study was conducted in Ontario, Canada during 2018–2019. EO-CRC cases aged 20–49 years (n = 175) were identified from the Ontario Cancer Registry; sex- and age 
group-matched controls (n = 253) were recruited through random digit dialing. Data on potential a priori risk factors were collected using a web-based self-reported 
questionnaire. Odds ratios (OR) and 95% confidence intervals (CI) were estimated using multivariable logistic regression. Family history of CRC in a first- or 
second-degree relative (OR 2.37; 95% CI 1.47–3.84), longer sedentary time (≥ 10 vs. < 5 h/day, OR 1.93; 95% CI 1.02–3.65), greater consumption of sugary 
drinks (≥ 7 vs. < 1 drinks/week, OR 2.99; 95% CI 1.57–5.68), and a more Westernized dietary pattern (quartile 4 vs. 1, OR 1.92; 95% CI 1.01–3.66) were each associated 
with an increased risk of EO-CRC. Conversely, calcium supplement use (OR 0.53; 95% CI 0.31–0.92), history of allergy or asthma (OR 0.62; 95% CI 0.39–0.98), and 
greater parity in females (≥ 3 vs. nulliparity, OR 0.29; 95% CI 0.11–0.76) were each associated with a reduced risk. Modifiable factors, particularly sedentary 
behavior and unhealthy diet including sugary drink consumption, may be associated with EO-CRC risk. Our findings, if replicated, may help inform prevention strategies 
targeted at younger persons.

### [7] Interaction of Gut Microbiome and Host microRNAs with the Occurrence of Colorectal and Breast Cancer and Their Impact on Patient Immunity
- Citation: OncoTargets and Therapy; 2021
- DOI: 10.2147/OTT.S329383
- URL: https://www.semanticscholar.org/paper/4ceeb7c1b17719e7e0c87984abb1787d9595a9c7
- S2 paperId: 4ceeb7c1b17719e7e0c87984abb1787d9595a9c7

**Abstract:**
Abstract Breast and colorectal cancers are two primary malignancies on which most of the research done worldwide investigates the potential genetic and environmental 
risk factors and thereby tries to develop therapeutic methods to improve prognosis. Breast cancer is the most diagnosed cancer type in women, while colorectal cancer 
is diagnosed in males as the third most and females as the second most cancer type. Though these two cancer types are predominantly seen in adult patients worldwide, 
in the current context, these malignancies are diagnosed at a younger age with a significant rate of incidents than previous. Such early-onset cancers are generally 
present at an advanced stage of the most aggressive type with a poor prognosis. In the past, the focus of the research was mainly on studying possible candidate genes 
to understand the onset. However, it is now recognized that genetics, epigenetics, and other environmental factors play a pivotal role in cancer susceptibility. 
Thus, most studies were diversified to study the behavior of host microRNAs, and the involvement of gut microbiota and good communication between them surfaced 
in the occurrence and state of the disease. It is understood that the impact of these factors affects the outcome of the disease. Out of the adverse outcomes 
identified relating to the disease, immunosuppression is one of the most concerning outcomes in the current world, where such individuals remain vulnerable to 
infections. Recent studies revealed that microbiome and microRNA could create a considerable impact on immunosuppression. This review focused on the behavior of host 
microRNAs and gut microbiome for the onset of the disease and progression, thereby influencing an individual’s immunosuppression. Understanding the interactions 
among microRNA, microbiome, presentation of the disease, and impact on the immune system will be immensely useful for developing future therapeutic strategies 
based on targeting host microRNA and the patient’s gut microbiome. Therapies such as inhibitory-miRNA therapies, miRNA mimic-based therapeutics, immune checkpoint 
blockade therapies, and bacteria‐assisted tumor‐targeted therapies help modulate cancer. At the same time, it paid equal attention to potential noninvasive biomarkers 
in diagnosis, prognosis, and therapeutics in both cancers.

### [8] The Role of Diet and Lifestyle in Early-Onset Colorectal Cancer: A Systematic Review
- Citation: Cancers; 2021
- DOI: 10.3390/cancers13235933
- URL: https://www.semanticscholar.org/paper/acf8aeaafda36ed580e27eaff7d712fce95932cf
- S2 paperId: acf8aeaafda36ed580e27eaff7d712fce95932cf

**Abstract:**
Simple Summary This systematic review sifted through the exogenous dietary and lifestyle risk factors associated with early-onset colorectal cancer, going through 
the putative involvement of these exogenous risk factors in epigenetic and microbiota modifications. Given the burden of early-onset colorectal cancer and its 
globally increasing trend with scant literature on its pathogenesis, we believe it would be of benefit to highlight the importance of further systematic and 
large studies. Indeed, dietary and lifestyle modification could complement colorectal screening for early-onset colorectal cancer prevention. Abstract The 
incidence of early-onset colorectal cancer, defined as colorectal cancer occurring in young adults under the age of 50, is increasing globally. Knowledge 
of the etiological factors in young adults is far from complete. Questionable eoCRCs’ exogenous factors are represented by processed meat, sugary drinks, 
alcohol, Western dietary pattern, overweight and obesity, physical inactivity, and smoking, though with heterogeneous results. Therefore, we performed a systematic 
review to summarize the current evidence on the role of diet and lifestyle as eoCRC risk factors. We systematically searched PubMed, Scopus, and EMBASE up to July 
2021, for original studies evaluating diet, alcohol, physical activity, BMI, and smoking in eoCRC and included twenty-six studies. Indeed, the exogenous factors 
could represent modifiable key factors, whose recognition could establish areas of future interventions through public health strategies for eoCRC primary prevention. 
Additionally, we discussed the role of additional non-modifiable risk factors, and of epigenetic regulation and microbiota as mediators of the eoCRC triggered by diet 
and lifestyle.

### [9] Early-Onset Gastrointestinal Malignancies: An Investigation into a Rising Concern
- Citation: Cancers; 2024
- DOI: 10.3390/cancers16081553
- URL: https://www.semanticscholar.org/paper/dc4897253f14f48c2aa9005962e8a79c96f0ef84
- S2 paperId: dc4897253f14f48c2aa9005962e8a79c96f0ef84

**Abstract:**
Simple Summary In recent decades, there has been an increase in gastrointestinal malignancies diagnosed in individuals below the age of 50. Improved recognition 
of risk factors for these cancers may lead to prevention or earlier screening, which can reduce disease morbidity and mortality. This study aims to comprehensively 
review the characteristics, genetic factors, and environmental risks of early-onset gastrointestinal and liver cancers. Incidence trends are highlighted for these 
malignancies, as are screening guidelines. Although we describe many well-established risk factors for early-onset gastrointestinal malignancies, future 
population-based studies may help identify additional risk factors and shed light on improved screening strategies or early detection techniques. Abstract 
There is growing recognition of early-onset gastrointestinal (GI) malignancies in young adults < 50 years of age. While much of the literature has emphasized 
colorectal cancer, these also include esophageal, gastric, liver, pancreatic, and biliary tract malignancies. Various factors, including lifestyle, hereditary, 
and environmental elements, have been proposed to explain the rising incidence of GI malignancies in the younger population. This review aims to provide an overview 
of the recent literature, including global trends and information regarding genetic and environmental risk factors.

### [10] Premature ovarian insufficiency in female adolescent and young adult survivors of non-gynecological cancers: a population-based cohort study
- Citation: Reproductive Health; 2023
- DOI: 10.1186/s12978-022-01559-8
- URL: https://www.semanticscholar.org/paper/2455270f847bae4026ae04f772f370787aa00442
- S2 paperId: 2455270f847bae4026ae04f772f370787aa00442

**Abstract:**
Background The risk of premature ovarian insufficiency (POI) is increased in adolescent and young adult (AYA) cancer survivors, with the prevalence 
depending on cancer diagnosis, treatment, and patient factors. Prior studies are limited by sample size and type of cancer included. The objective of 
this study was to assess the risk of POI in female AYA survivors of non-gynecologic cancers, using a population-based approach. Methods This population-based 
retrospective cohort study comprises 21,666 females, 15–39 years old, diagnosed with a single non-gynecologic cancer in Ontario, Canada from 1995 to 2015. 
Through health administrative data linkage, participants were followed until their 40th birthday, December 31, 2018, bilateral oophorectomy, loss of health 
insurance eligibility or death. Each cancer survivor was matched to 5 females who were not diagnosed with cancer (unexposed, n = 108,330). Women with bilateral 
oophorectomy or a prior menopause diagnosis were excluded. POI was identified through use of the ICD-9 code for menopause (ICD9-627). Modified Poisson regression 
models were used to calculate the adjusted relative risk (aRR) of POI for AYA cancer survivors compared to unexposed individuals, adjusted for income, parity, age, 
and immigration status. Results The occurrence of POI was higher in survivors of AYA cancer versus unexposed patients (5.4% vs. 2.2%). Survivors of AYA cancer had an 
increased risk of POI relative to unexposed patients (aRR 2.49; 95% CI 2.32–2.67). Risk varied by type of cancer: breast (4.32; 3.84–4.86), non-Hodgkin’s lymphoma 
(3.77; 2.88–4.94), Hodgkin’s lymphoma (2.37; 1.91–2.96), leukemia (14.64; 10.50–20.42), thyroid (1.26; 1.09–1.46) and melanoma (1.04; 0.82–1.32). Risk varied by 
age at time of cancer diagnosis, with a higher risk among females diagnosed at age 30–39 years (3.07; 2.80–3.35) than aged 15–29 years (1.75; 1.55–1.98). 
Conclusions AYA survivors of non-gynecologic cancers are at an increased risk of POI, particularly survivors of lymphomas, leukemia, breast, and thyroid cancer. 
The risk of POI is increased for those diagnosed with cancer at an older age. These results should inform reproductive counseling of female AYAs diagnosed with cancer. 
Premature ovarian insufficiency is the onset of premature menopause in individuals less than 40-years-old. Previous research has shown that there is a higher risk 
of premature ovarian insufficiency in adolescent and young adult cancer survivors, due to the toxicity of cancer treatments on reproductive organs. Prior research 
was limited in its applicability by having small sample sizes, only including childhood cancer, excluding young adults, and studying fewer types of cancer. This 
study was conducted using a large population-based approach, on all females aged 15–39 years old with cancer in Ontario, Canada from 1995 to 2015. 
We found that there was nearly a 2.5 times greater risk of premature ovarian insufficiency in cancer survivors compared patients without cancer. 
Compared to patients without cancer, this risk was highest for survivors of leukemia (14 times higher risk), followed by breast cancer (4 times higher risk), 
lymphomas (2–4 times higher risk), and thyroid cancer (1.2 times higher risk). There is no increased risk in melanoma survivors. The risk was higher in 
individuals diagnosed with cancer at a later age (30–39 years), with a risk 3 times higher than the population without cancer, while a younger age of 
diagnosis (15–29 years) carries a risk only 1.75 times higher than the population without cancer. These results should help improve healthcare provider and 
patient understanding of the risk of premature ovarian insuficiency in young cancer survivors, and guide counseling at the time of cancer diagnosis and 
during survivorship on future reproductive function.

### [11] Risk factors behind the increase of early-onset cancer in Italian adolescents and young adults: An investigation from the Italian AYA Working group.
- Citation: European Journal of Cancer; 2024
- DOI: 10.1016/j.ejca.2024.115042
- URL: https://www.semanticscholar.org/paper/87ca24ff47600a88631e8662f2ae073c7fedb68e
- S2 paperId: 87ca24ff47600a88631e8662f2ae073c7fedb68e

**Abstract:**
(No abstract provided.)

### [12] A risk scoring system to predict the individual incidence of early-onset colorectal cancer
- Citation: BMC Cancer; 2022
- DOI: 10.1186/s12885-022-09238-4
- URL: https://www.semanticscholar.org/paper/5376a9c7fbd800ae8fe32bf5792555ddef3d89de
- S2 paperId: 5376a9c7fbd800ae8fe32bf5792555ddef3d89de

**Abstract:**
Background The incidence of early-onset colorectal cancer (EOCRC) is increasing at an alarming rate and further studies are needed to identify risk factors and 
to develop prevention strategies. Methods Risk factors significantly associated with EOCRC were identified using meta-analysis. An individual risk appraisal model 
was constructed using the Rothman–Keller model. Next, a group of random data sets was generated using the binomial distribution function method, to determine nodes 
of risk assessment levels and to identify low, medium, and high risk populations. Results A total of 32,843 EOCRC patients were identified in this study, and nine 
significant risk factors were identified using meta-analysis, including male sex, Caucasian ethnicity, sedentary lifestyle, inflammatory bowel disease, and high 
intake of red meat and processed meat. After simulating the risk assessment data of 10,000 subjects, scores of 0 to 0.0018, 0.0018 to 0.0036, and 0.0036 or more 
were respectively considered as low-, moderate-, and high-risk populations for the EOCRC population based on risk trends from the Rothman–Keller model. Conclusion 
This model can be used for screening of young adults to predict high risk of EOCRC and will contribute to the primary prevention strategies and the reduction of 
risk of developing EOCRC.
